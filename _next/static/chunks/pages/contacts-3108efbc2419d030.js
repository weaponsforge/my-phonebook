(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[192],{8719:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/contacts",function(){return r(6610)}])},8534:function(t,e,r){"use strict";r.d(e,{Z:function(){return x}});var n=r(5893),a=r(7294),i=r(1163),s=r(3768),l=r(7357),c=r(3972),o=r(6489),d=r(1379),u=function(t){let{children:e}=t;return(0,n.jsx)(l.Z,{sx:{width:{sm:"600px"},backgroundColor:{xs:"none",sm:"rgba(255, 255, 255, 0.4)"},borderRadius:"8px",textAlign:"center",margin:"24px !important",padding:"24px",display:"grid",placeContent:"center"},children:e})},h=r(3367),p=function(t){let{authError:e}=t,r=(0,h.e6)("activeTheme");return(0,n.jsx)(d.Z,{children:(0,n.jsx)(l.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",placeContent:"center",height:"100vh"},children:(0,n.jsxs)(u,{children:[(0,n.jsx)("span",{children:(0,n.jsx)(c.Z,{variant:"h6",color:"#000",children:"Loading..."})}),(0,n.jsx)("span",{children:(0,n.jsx)(o.Z,{color:"light"===r?"dark":"primary"})}),e&&(0,n.jsx)(c.Z,{variant:"label",color:"error",children:e})]})})})},x=function(t){return function(e){let r=(0,i.useRouter)(),{authLoading:l,authUser:c,authError:o}=(0,s.C0)("auth");return(0,a.useEffect)(()=>{l||null!==c||r.push("/login")},[c,l,r]),l?(0,n.jsx)(p,{}):c?(0,n.jsx)(t,{...e}):(0,n.jsx)(p,{authError:o})}}},9361:function(t,e,r){"use strict";r.d(e,{l:function(){return i}});var n=r(5893),a=r(8441);let i=()=>(0,n.jsx)(a.Z,{sx:{position:"fixed",width:"100vw"}})},7488:function(t,e,r){"use strict";r.d(e,{q:function(){return o}});var n=r(2037),a=r(4924),i=r(7297),s=r(3247),l=r(9751);function c(){let t=(0,i.Z)(["(?<segment>[^/]+)"]);return c=function(){return t},t}class o{static async createDoc(t,e){switch(!0){case(0,n.Z)(this,o,h).call(o,t):{let r=(0,s.JU)(this.db,t),n=r.id,a=await (0,s.pl)(r,{...e,doc_id:n,date_created:(0,s.Bt)(),date_updated:(0,s.Bt)()});return a}case(0,n.Z)(this,o,u).call(o,t):{let r=(0,s.hJ)(this.db,t),n=(0,s.JU)(r),a=n.id,i=await (0,s.pl)(n,{...e,doc_id:a,date_created:(0,s.Bt)(),date_updated:(0,s.Bt)()});return i}}}static async readDoc(t){if(!(0,n.Z)(this,o,h).call(o,t))return;let e=(0,s.JU)(this.db,t),r=await (0,s.QT)(e),a=r.data();return a}static async readCol(t){for(var e=arguments.length,r=Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];if(!(0,n.Z)(this,o,u).call(o,t))return;let i=(0,s.hJ)(this.db,t),l=(0,s.IO)(i,...r),c=await (0,s.PL)(l),d=c.docs.map(t=>({...t.data()}));return d}static async readColGroup(t){for(var e=arguments.length,r=Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];if(1!==(0,n.Z)(this,o,d).call(o,t))return;let i=(0,s.B$)(this.db,t),l=(0,s.IO)(i,...r),c=await (0,s.PL)(l),u=c.docs.map(t=>({...t.data()}));return u}static async updateDoc(t,e){if(!(0,n.Z)(this,o,h).call(o,t))return;let r=(0,s.JU)(this.db,t),a=await (0,s.r7)(r,{...e,date_updated:(0,s.Bt)()});return a}static async deleteDoc(t){if(!(0,n.Z)(this,o,h).call(o,t))return;let e=(0,s.JU)(this.db,t),r=await (0,s.oe)(e);return r}static async subscribeDoc(t,e){if(!(0,n.Z)(this,o,h).call(o,t))return;let r=(0,s.JU)(this.db,t),a=(0,s.cf)(r,e);return a}static async subscribeCol(t,e){for(var r=arguments.length,a=Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];if(!(0,n.Z)(this,o,u).call(o,t))return;let l=(0,s.hJ)(this.db,t),c=(0,s.IO)(l,...a),d=(0,s.cf)(c,e);return d}}(0,a.Z)(o,"db",(0,s.ad)(l.H));var d={writable:!0,value:t=>{let e=t.match(RegExp(String.raw(c()),"gi")).length;return e}},u={writable:!0,value:t=>{let e=(0,n.Z)(o,o,d).call(o,t);return 0!==e&&e%2==1}},h={writable:!0,value:t=>{let e=(0,n.Z)(o,o,d).call(o,t);return 0!==e&&e%2==0}};(0,a.Z)(o,"subscribeColGroup",async function(t,e){for(var r=arguments.length,a=Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];if(1!==(0,n.Z)(o,o,d).call(o,t))return;let l=(0,s.B$)(o.db,t),c=(0,s.IO)(l,...a),u=(0,s.cf)(c,e);return u})},6610:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return S}});var n=r(5893),a=r(8534),i=r(1379),s=r(9361),l=r(7357),c=r(3768),o=r(7297),d=r(3972),u=r(2734),h=r(1987),p=r(7952),x=r(1163);function f(){let t=(0,o.Z)(["(?<firstNameInitial>^[a-z])"]);return f=function(){return t},t}function m(){let t=(0,o.Z)(["(?<middleNameInitial>^[a-z])"]);return m=function(){return t},t}function g(){let t=(0,o.Z)(["(?<lastNameInitial>^[a-z])"]);return g=function(){return t},t}let b=(t,e,r)=>{var n,a,i;let s=(null!==(n=t.match(RegExp(String.raw(f()),"i")))&&void 0!==n?n:[""])[0],l=(null!==(a=e.match(RegExp(String.raw(m()),"i")))&&void 0!==a?a:[""])[0],c=(null!==(i=r.match(RegExp(String.raw(g()),"i")))&&void 0!==i?i:[""])[0];return"".concat(s).concat(l).concat(c)},j=t=>{let e=0;for(let r=0;r<t.length;r++)e+=t.charCodeAt(r);return e%255},w=t=>{let{contact:e}=t,r=(0,x.useRouter)(),a=(0,u.Z)(),i=b(e.first_name,e.middle_name,e.last_name).toUpperCase(),s=j(i),l=t=>{t.stopPropagation(),r.push("/contacts/edit/".concat(e.doc_id)),(0,c.cA)("show.sidebar",!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(h.Z,{elevation:5,sx:{backgroundColor:"inherit",backdropFilter:"blur(2px)",display:{xs:"none",md:"grid"},gridTemplateColumns:"1fr 6fr",gridAutoRows:"1fr",padding:"15px",gap:"15px",alignItems:"center",borderRadius:"10px",width:"auto",maxWidth:"80vw","&:hover":{backdropFilter:"contrast(120%)"}},onClick:l,children:[(0,n.jsx)(p.Z,{sx:{backgroundColor:"hsla(".concat(s,",50%,80%,50%)"),border:"1px solid grey"},children:i}),(0,n.jsxs)(d.Z,{variant:"h8",sx:{color:a.palette.primary,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e.first_name," ",e.middle_name," ",e.last_name]})]}),(0,n.jsxs)(h.Z,{elevation:0,sx:{backgroundColor:"inherit",backdropFilter:"blur(2px)",display:{xs:"grid",md:"none"},gridTemplateColumns:"1fr 6fr",gridAutoRows:"1fr",padding:"15px",gap:"15px",alignItems:"center",borderRadius:"10px",width:"auto",maxWidth:"80vw","&:hover":{backdropFilter:"contrast(120%)"}},onClick:l,children:[(0,n.jsx)(p.Z,{sx:{backgroundColor:"hsla(".concat(s,",50%,80%,50%)"),border:"1px solid grey"},children:i}),(0,n.jsxs)(d.Z,{variant:"h8",sx:{color:a.palette.primary,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e.first_name," ",e.middle_name," ",e.last_name]})]})]})},Z=t=>{let{content:e}=t,{group:r,contacts:a}=e;return(0,n.jsxs)(l.Z,{sx:{display:"grid",gridTemplateColumns:"40px 1fr",p:"25px",borderBottom:"1px dashed grey"},children:[(0,n.jsx)(d.Z,{variant:"h4",sx:{padding:"15px",paddingLeft:"0",aspectRatio:"1",position:"sticky",top:0},children:"misc"===r?"":r}),(0,n.jsx)(l.Z,{sx:{backgroundColor:"inherit",display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",alignItems:"start",gap:"10px",flex:"1"},children:a.map((t,e)=>(0,n.jsx)(w,{contact:t},e))})]})};function C(){let t=(0,o.Z)(["(?<firstLetterChar>^[a-z])|"]);return C=function(){return t},t}let v=()=>{let{data:t,error:e}=(0,c.ay)("contacts"),r=[...null!=t?t:[]].reduce((t,e)=>{let r=e.first_name.match(RegExp(String.raw(C()),"i"))[0];return r?(t[r.toUpperCase()]||(t[r.toUpperCase()]=[]),t[r.toUpperCase()]=[...t[r.toUpperCase()],e]):(t.misc||(t.misc=[]),t.misc=[...t.misc,e]),t},{}),a=Object.entries(r);return(0,n.jsxs)(l.Z,{sx:{width:"100%",height:"100%"},children:[t&&a.map((t,e)=>(0,n.jsx)(Z,{content:{group:t[0],contacts:t[1]}},e)),e&&(0,n.jsx)("div",{children:"Error"})]})};var _=r(7294);let y={first_name:"Matching First Name",middle_name:"Matching Middle Name",last_name:"Matching Last Name",contact_no:"Matching Contact Number",contact_email:"Matching Contact Email"},k=t=>{let{content:e}=t,{group:r,contacts:a}=e;if(y[r])return(0,n.jsxs)(l.Z,{sx:{display:"grid",gridTemplateColumns:"1fr",padding:"20px",borderBottom:"1px dashed grey"},children:[(0,n.jsx)(d.Z,{variant:"h5",sx:{},children:y[r]}),(0,n.jsx)(l.Z,{sx:{backgroundColor:"inherit",display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",alignItems:"start",gap:"10px",flex:"1"},children:a.map((t,e)=>(0,n.jsx)(w,{contact:t},e))})]})};function E(){let t=(0,o.Z)(["",""]);return E=function(){return t},t}let{Box:R}=r(8310),U=(t,e)=>{let r=[...e].reduce((e,r)=>{for(let[n,a]of Object.entries(r))RegExp(String.raw(E(),t),"i").test(a)&&(e[n]||(e[n]=[]),e[n]=[...e[n],r]);return e},{});return r},I=()=>{let t=(0,c.C0)("ui.search.searchKeyword"),e=(0,c.C0)("contacts.data"),r=U(t,e);delete r.doc_id,delete r.profile_picture_url,delete r.date_updated,delete r.date_created;let a=Object.entries(r);return(0,_.useEffect)(()=>{if(1===a.length)for(let[,t]of a)(0,c.cA)("ui.activeContact",t[0]),(0,c.cA)("ui.phase.editContact",!0)},[a]),(0,n.jsx)(R,{sx:{width:"100%",height:"100%"},children:(0,n.jsx)(R,{children:a.map((t,e)=>(0,n.jsx)(k,{content:{group:t[0],contacts:t[1]}},e))})})},N=()=>{let t=(0,c.C0)("ui.phase");return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(l.Z,{sx:{flex:6.8,maxWidth:"1600px",justifyContent:"center",width:"100%",overflowY:"scroll",userSelect:"none"},children:(null==t?void 0:t.search)?(0,n.jsx)(I,{}):(0,n.jsx)(v,{})})})};var A=function(){let{loading:t}=(0,c.ay)("contacts");return(0,n.jsxs)(i.Z,{children:[t&&(0,n.jsx)(s.l,{}),(0,n.jsx)(l.Z,{sx:{flex:1,display:"flex",flexWrap:"wrap",overflowY:"scroll",userSelect:"none",justifyContent:"center"},children:(0,n.jsx)(N,{})})]})},O=r(7488),B=r(3247),S=(0,a.Z)(function(){let t=(0,c.C0)("auth");return(0,_.useEffect)(()=>{O.q.subscribeCol("users/".concat(t.authUser.uid,"/contacts"),t=>{let e=[];t.forEach(t=>{e.push(t.data())}),(0,c.Gt)("contacts",()=>e)},(0,B.Xo)("sorting"))},[t.authUser.uid]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(A,{})})})}},function(t){t.O(0,[58,101,368,310,333,774,888,179],function(){return t(t.s=8719)}),_N_E=t.O()}]);