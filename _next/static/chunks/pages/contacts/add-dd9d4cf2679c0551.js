(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[391],{7946:function(e,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/contacts/add",function(){return n(3805)}])},3805:function(e,i,n){"use strict";n.r(i);var t=n(5893),l=n(7294),a=n(7488),s=n(1018),o=n(7357),r=n(1987),d=n(3972),u=n(7952),c=n(2715),h=n(9397),p=n(8534),m=n(5077),g=n(8978),v=n(2012),x=n(1638);let f={sorting:"",first_name:"",middle_name:"",last_name:"",phone_number:"",email_address:"",profile_picture_url:""},_="picturefile",C=()=>{var e,i,n,p,C;let[j,Z]=(0,l.useState)(f),[y,b]=(0,l.useState)(null),[w,N]=(0,l.useState)(!1),{authUser:P}=(0,x.C0)("auth"),k=(0,x.C0)(_),E=(0,l.useMemo)(()=>{var e;return k&&null!==(e=null==k?void 0:k.imgSrc)&&void 0!==e?e:""},[k]),S=e=>{let i=e.target.id,n=e.target.value,t={...j,[i]:n};Z(t),JSON.stringify(t)===JSON.stringify(f)?N(!1):N(!0)},z=async()=>{var e,i,n,t;let l="users/".concat(P.uid,"/contacts/"),o=a.q.generateDocId(l),r={...j,id:o,sorting:"".concat(j.first_name).concat(j.middle_name).concat(j.last_name).toUpperCase()};if(null==k?void 0:k.file)try{await (0,s.vJ)("photos/".concat(P.uid),k.file,"photo_".concat(o)),r.profile_picture_url="photos/".concat(P.uid,"/photo_").concat(o)}catch(t){let n=null!==(i=null==t?void 0:null===(e=t.response)||void 0===e?void 0:e.data)&&void 0!==i?i:t.message;n.includes("storage/unauthorized")&&(n="Photo upload failed. Please verify that the photo you are uploading is less than 1 MB in file size. Only .jpg, .jpeg, .png, .gif, .bmp and .webp image file types are supported."),b(n);return}try{await a.q.createDoc("users/".concat(P.uid,"/contacts/").concat(o),r),Z(f),(0,x.cA)(_,{file:null,imgSrc:null})}catch(i){let e=null!==(t=null==i?void 0:null===(n=i.response)||void 0===n?void 0:n.data)&&void 0!==t?t:i.message;e.includes("Missing or insufficient permissions")&&(e="Creating a new Contact failed. Please check your input."),b(e)}};return(0,t.jsxs)(m.Z,{children:[(0,t.jsx)(o.Z,{sx:{flex:"1",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",maxWidth:"100%"},children:(0,t.jsxs)(r.Z,{sx:{display:"grid",gridTemplateColumns:"1fr auto",gap:"10px",alignItems:"center",padding:"30px",borderRadius:"20px",backgroundColor:"inherit",backdropFilter:"contrast(120%)"},children:[(0,t.jsx)(d.Z,{variant:"h5",sx:{gridColumn:"1/-1"},children:"add Contact"}),(0,t.jsxs)(o.Z,{sx:{aspectRatio:"1",gridColumn:"1/-1",position:"relative"},children:[(0,t.jsx)(u.Z,{src:E,alt:"profile_picture_url",sx:e=>({width:"342px",height:"342px",[e.breakpoints.down("400")]:{width:"100%",height:"100%"}})}),(0,t.jsx)(g.Z,{fileDomID:_,styles:{position:"absolute",bottom:"0",right:"0"},errorCallback:e=>b(e),hasFile:""!==E})]}),(0,t.jsx)(d.Z,{variant:"h7",children:"First Name"}),(0,t.jsx)(c.Z,{id:"first_name",size:"small",inputProps:{style:{height:"20px"}},value:null!==(e=null==j?void 0:j.first_name)&&void 0!==e?e:"",onChange:S}),(0,t.jsx)(d.Z,{variant:"h7",children:"Middle Name"}),(0,t.jsx)(c.Z,{id:"middle_name",size:"small",inputProps:{style:{height:"20px"}},value:null!==(i=null==j?void 0:j.middle_name)&&void 0!==i?i:"",onChange:S}),(0,t.jsx)(d.Z,{variant:"h7",children:"Last Name"}),(0,t.jsx)(c.Z,{id:"last_name",size:"small",inputProps:{style:{height:"20px"}},value:null!==(n=null==j?void 0:j.last_name)&&void 0!==n?n:"",onChange:S}),(0,t.jsx)(d.Z,{variant:"h7",children:"Email Address"}),(0,t.jsx)(c.Z,{id:"email_address",size:"small",inputProps:{style:{height:"20px"}},value:null!==(p=null==j?void 0:j.email_address)&&void 0!==p?p:"",onChange:S}),(0,t.jsx)(d.Z,{variant:"h7",children:"Phone Number"}),(0,t.jsx)(c.Z,{id:"phone_number",size:"small",inputProps:{style:{height:"20px"}},value:null!==(C=null==j?void 0:j.phone_number)&&void 0!==C?C:"",onChange:S}),w?(0,t.jsx)(h.Z,{variant:"contained",sx:{gridColumn:"1/-1",fontWeight:"bold"},onClick:z,children:"SAVE CHANGE"}):(0,t.jsx)(h.Z,{variant:"contained",disabled:!0,sx:{gridColumn:"1/-1",fontWeight:"bold"},children:"SAVE CHANGE"})]})}),y&&(0,t.jsx)(v.Z,{message:y,closeHandler:()=>b(null)})]})};i.default=(0,p.Z)(C)}},function(e){e.O(0,[642,101,548,77,412,774,888,179],function(){return e(e.s=7946)}),_N_E=e.O()}]);