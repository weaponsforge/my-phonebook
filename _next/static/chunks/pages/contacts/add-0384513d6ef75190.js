(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[391],{7346:function(e,t,i){"use strict";var n=i(4836);t.Z=void 0;var l=n(i(4938)),a=i(5893),r=(0,l.default)([(0,a.jsx)("path",{d:"M12 4c-4.41 0-8 3.59-8 8s3.59 8 8 8 8-3.59 8-8-3.59-8-8-8zm5 11.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z",opacity:".3"},"0"),(0,a.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"},"1")],"CancelTwoTone");t.Z=r},7946:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/contacts/add",function(){return i(3805)}])},2012:function(e,t,i){"use strict";i.d(t,{Z:function(){return c}});var n=i(5893),l=i(7294),a=i(9397),r=i(9820),s=i(4799),o=i(594);function c(e){let{message:t,closeHandler:i}=e,[c,u]=(0,l.useState)(!0),d=(e,t)=>{"clickaway"!==t&&(u(!1),i&&i())},p=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Z,{color:"secondary",size:"small",onClick:d,children:"UNDO"}),(0,n.jsx)(s.Z,{size:"small","aria-label":"close",color:"inherit",onClick:d,children:(0,n.jsx)(o.Z,{fontSize:"small"})})]});return(0,n.jsx)("div",{children:(0,n.jsx)(r.Z,{open:c,autoHideDuration:6e3,onClose:d,message:t,action:p,sx:{maxWidth:600}})})}},8978:function(e,t,i){"use strict";var n=i(5893),l=i(7294),a=i(2092),r=i(5697),s=i.n(r),o=i(4799),c=i(1170),u=i(7346);let d={SEARCH:"search",CANCEL:"cancel"},p=["image/bmp","image/jpeg","image/jpg","image/png","image/gif","image/webp"];function h(e){let{fileDomID:t,hasFile:i=!1,errorCallback:r,clearFileCallback:s,setFileCallback:h,styles:m={}}=e,f=(0,l.useMemo)(()=>t,[t]),g=(0,a.C0)(f),v=(0,l.useRef)(),[x,C]=(0,l.useState)(i?d.CANCEL:d.SEARCH);(0,l.useEffect)(()=>{C(i?d.CANCEL:d.SEARCH)},[i]),(0,l.useEffect)(()=>{void 0!==f&&(0,a.cA)(f,{file:null,imgSrc:null})},[f]),(0,l.useEffect)(()=>{if((null==g?void 0:g.imgSrc)!==null)return()=>{URL.revokeObjectURL(null==g?void 0:g.imgSrc)}},[g]);let j=(0,l.useMemo)(()=>x===d.SEARCH?c.Z:u.Z,[x]),_=async e=>{if(e.target.files[0]){if(!p.includes(e.target.files[0].type)){r("File type not supported.");return}C(d.CANCEL),h&&h(e.target.files[0].name),(0,a.cA)(t,{file:e.target.files[0],imgSrc:URL.createObjectURL(e.target.files[0])})}},y=e=>{e.preventDefault(),v.current.value=null,URL.revokeObjectURL(null==g?void 0:g.imgSrc),C(d.SEARCH),(0,a.cA)(t,{file:null,imgSrc:null}),s&&s()};return(0,n.jsxs)(o.Z,{color:"primary","aria-label":"upload picture",component:"label",sx:m,onClick:e=>{x===d.CANCEL&&y(e)},children:[(0,n.jsx)("input",{hidden:!0,accept:"image/*",type:"file",ref:v,onChange:_}),(0,n.jsx)(j,{sx:{color:"black"}})]})}h.propTypes={fileDomID:s().string.isRequired,hasFile:s().bool,errorCallback:s().func.isRequired,clearFileCallback:s().func,setFileCallback:s().func,styles:s().object},t.Z=h},1018:function(e,t,i){"use strict";i.d(t,{C_:function(){return r},kX:function(){return s},vJ:function(){return a}});var n=i(9825),l=i(6650);let a=async function(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=(0,l.iH)(n.tO,"".concat(e,"/").concat(i));try{await (0,l.KV)(r,t,{customMetadata:a})}catch(e){throw Error(e)}return await (0,l.Jt)(r)},r=async e=>{let{pathToStorageDirectory:t,pathToStorageFile:i,fileName:a,allowMissingError:r=!1}=e,s=null!=i?i:"".concat(t,"/").concat(a),o=(0,l.iH)(n.tO,"".concat(s));if(!r)return await (0,l.oq)(o);try{let e=await (0,l.oq)(o);return e}catch(e){return!0}},s=async e=>{let t=(0,l.iH)(n.tO,e);return await (0,l.Br)(t)}},3805:function(e,t,i){"use strict";i.r(t);var n=i(5893),l=i(7294),a=i(7488),r=i(1018),s=i(7357),o=i(1987),c=i(3972),u=i(7952),d=i(2715),p=i(9397),h=i(8534),m=i(5077),f=i(8978),g=i(2012),v=i(2092);let x={sorting:"",first_name:"",middle_name:"",last_name:"",phone_number:"",email_address:"",profile_picture_url:""},C="picturefile",j=()=>{var e,t,i,h,j;let[_,y]=(0,l.useState)(x),[b,Z]=(0,l.useState)(null),[E,S]=(0,l.useState)(!1),{authUser:w}=(0,v.C0)("auth"),k=(0,v.C0)(C),A=(0,l.useMemo)(()=>{var e;return k&&null!==(e=null==k?void 0:k.imgSrc)&&void 0!==e?e:""},[k]),N=e=>{let t=e.target.id,i=e.target.value,n={..._,[t]:i};y(n),JSON.stringify(n)===JSON.stringify(x)?S(!1):S(!0)},R=async()=>{var e,t,i,n;let l="users/".concat(w.uid,"/contacts/"),s=a.q.generateDocId(l),o={..._,id:s,sorting:"".concat(_.first_name).concat(_.middle_name).concat(_.last_name).toUpperCase()};if(null==k?void 0:k.file)try{await (0,r.vJ)("photos/".concat(w.uid),k.file,"photo_".concat(s)),o.profile_picture_url="photos/".concat(w.uid,"/photo_").concat(s)}catch(n){let i=null!==(t=null==n?void 0:null===(e=n.response)||void 0===e?void 0:e.data)&&void 0!==t?t:n.message;i.includes("storage/unauthorized")&&(i="Photo upload failed. Please verify that the photo you are uploading is less than 1 MB in file size. Only .jpg, .jpeg, .png, .gif, .bmp and .webp image file types are supported."),Z(i);return}try{await a.q.createDoc("users/".concat(w.uid,"/contacts/").concat(s),o),y(x),(0,v.cA)(C,{file:null,imgSrc:null})}catch(t){let e=null!==(n=null==t?void 0:null===(i=t.response)||void 0===i?void 0:i.data)&&void 0!==n?n:t.message;e.includes("Missing or insufficient permissions")&&(e="Creating a new Contact failed. Please check your input."),Z(e)}};return(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(s.Z,{sx:{flex:"1",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",maxWidth:"100%"},children:(0,n.jsxs)(o.Z,{sx:{display:"grid",gridTemplateColumns:"1fr auto",gap:"10px",alignItems:"center",padding:"30px",borderRadius:"20px",backgroundColor:"inherit",backdropFilter:"contrast(120%)"},children:[(0,n.jsx)(c.Z,{variant:"h5",sx:{gridColumn:"1/-1"},children:"add Contact"}),(0,n.jsxs)(s.Z,{sx:{aspectRatio:"1",gridColumn:"1/-1",position:"relative"},children:[(0,n.jsx)(u.Z,{src:A,alt:"profile_picture_url",sx:e=>({width:"342px",height:"342px",[e.breakpoints.down("400")]:{width:"100%",height:"100%"}})}),(0,n.jsx)(f.Z,{fileDomID:C,styles:{position:"absolute",bottom:"0",right:"0"},errorCallback:e=>Z(e),hasFile:""!==A})]}),(0,n.jsx)(c.Z,{variant:"h7",children:"First Name"}),(0,n.jsx)(d.Z,{id:"first_name",size:"small",inputProps:{style:{height:"20px"}},value:null!==(e=null==_?void 0:_.first_name)&&void 0!==e?e:"",onChange:N}),(0,n.jsx)(c.Z,{variant:"h7",children:"Middle Name"}),(0,n.jsx)(d.Z,{id:"middle_name",size:"small",inputProps:{style:{height:"20px"}},value:null!==(t=null==_?void 0:_.middle_name)&&void 0!==t?t:"",onChange:N}),(0,n.jsx)(c.Z,{variant:"h7",children:"Last Name"}),(0,n.jsx)(d.Z,{id:"last_name",size:"small",inputProps:{style:{height:"20px"}},value:null!==(i=null==_?void 0:_.last_name)&&void 0!==i?i:"",onChange:N}),(0,n.jsx)(c.Z,{variant:"h7",children:"Email Address"}),(0,n.jsx)(d.Z,{id:"email_address",size:"small",inputProps:{style:{height:"20px"}},value:null!==(h=null==_?void 0:_.email_address)&&void 0!==h?h:"",onChange:N}),(0,n.jsx)(c.Z,{variant:"h7",children:"Phone Number"}),(0,n.jsx)(d.Z,{id:"phone_number",size:"small",inputProps:{style:{height:"20px"}},value:null!==(j=null==_?void 0:_.phone_number)&&void 0!==j?j:"",onChange:N}),E?(0,n.jsx)(p.Z,{variant:"contained",sx:{gridColumn:"1/-1",fontWeight:"bold"},onClick:R,children:"SAVE CHANGE"}):(0,n.jsx)(p.Z,{variant:"contained",disabled:!0,sx:{gridColumn:"1/-1",fontWeight:"bold"},children:"SAVE CHANGE"})]})}),b&&(0,n.jsx)(g.Z,{message:b,closeHandler:()=>Z(null)})]})};t.default=(0,h.Z)(j)}},function(e){e.O(0,[540,101,548,77,456,774,888,179],function(){return e(e.s=7946)}),_N_E=e.O()}]);