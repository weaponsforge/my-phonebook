(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{4865:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return t(5836)}])},3787:function(e,r,t){"use strict";var n=t(5893),a=t(5441),s=t(948);let o=(0,s.ZP)(e=>(0,n.jsx)(a.Z,{...e}))(e=>{let{theme:r}=e;return{"& .MuiInputBase-root":{"& input":{backgroundClip:"text !important"}},"& .MuiOutlinedInput-input":{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px transparent inset"}}}});r.Z=o},8065:function(e,r,t){"use strict";t.d(r,{e:function(){return o},f:function(){return l}});var n=t(7294),a=t(771);let s={response:null,loading:!1,error:"",status:a.Z.STATUS.IDLE},o=a.Z.STATUS;function l(e){let[r,t]=(0,n.useState)(s);return(0,n.useEffect)(()=>{null!==e&&(t(e=>({...e,response:null,loading:!0,error:"",status:a.Z.STATUS.PENDING})),e.then(e=>{t(r=>({...r,response:e,loading:!1,status:a.Z.STATUS.SUCCESS}))},e=>{var r;t(t=>{var n;return{...t,loading:!1,error:null!==(r=null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.data)&&void 0!==r?r:e.message,status:a.Z.STATUS.ERROR}})}))},[e]),{response:r.response,loading:r.loading,error:r.error,status:r.status}}},7797:function(e,r,t){"use strict";t.d(r,{LS:function(){return i},_p:function(){return s},jn:function(){return c},w$:function(){return l},xe:function(){return u}});var n=t(6154);let a="".concat("https://myphonebook-app.vercel.app","/api/account/action"),s={SEND_VERIFICATTION:"send_verification",SEND_RESET:"send_reset",VERIFY_EMAIL:"verifyEmail",RESET_PASSWORD:"resetPassword",RECOVER_EMAIL:"recoverEmail"},o=async e=>{let{mode:r,actionCode:t,email:s,password:o}=e;return await n.Z.post(a,{mode:r,actionCode:t,email:s,password:o})},l=async e=>o({mode:s.SEND_VERIFICATTION,email:e}),i=async e=>o({mode:s.SEND_RESET,email:e}),u=async e=>o({mode:s.VERIFY_EMAIL,actionCode:e}),c=async(e,r)=>o({mode:s.RESET_PASSWORD,actionCode:e,password:r})},771:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var n=t(4924);class a{static wrap(e){return new Promise(r=>{e.then(e=>{r({response:e,status:a.STATUS.SUCCESS,error:""})},e=>{var t,n;r({response:null,status:a.STATUS.ERROR,error:null!==(n=null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.data)&&void 0!==n?n:e.message})})})}}(0,n.Z)(a,"STATUS",{PENDING:"pending",SUCCESS:"success",ERROR:"error",DEFAULT:"default"})},5323:function(e,r,t){"use strict";t.d(r,{Q:function(){return S}});var n=t(2037),a=t(4924),s=t(7297);function o(){let e=(0,s.Z)(["(?<uppercase>[A-Z])"]);return o=function(){return e},e}function l(){let e=(0,s.Z)(["(?<lowercase>[a-z])"]);return l=function(){return e},e}function i(){let e=(0,s.Z)(["(?<number>[0-9])"]);return i=function(){return e},e}function u(){let e=(0,s.Z)(["(?<symbol>[-#?!@$ %^&*())])"]);return u=function(){return e},e}function c(){let e=(0,s.Z)(["(?<prohibitedCharacters>[-a-zA-Z0-9#?!@$ %^&*()]+)"]);return c=function(){return e},e}function d(){let e=(0,s.Z)(["(?<emailPrefix>^[^@]+)"]);return d=function(){return e},e}function p(){let e=(0,s.Z)(["(?<atSymbol>@)"]);return p=function(){return e},e}function m(){let e=(0,s.Z)(["(?<domain>[^@]+$)"]);return m=function(){return e},e}class S{}(0,a.Z)(S,"email",e=>{let r=(0,n.Z)(S,S,x).call(S,e),t=(0,n.Z)(S,S,R).call(S,e),a=(0,n.Z)(S,S,b).call(S,e),s=!r||!t||!a,o=(0,n.Z)(S,S,Z).call(S,s,r,t,a);return{error:s,helperText:o,color:s?"error":"success"}}),(0,a.Z)(S,"password",e=>{let r=(0,n.Z)(S,S,h).call(S,e),t=(0,n.Z)(S,S,f).call(S,e),a=(0,n.Z)(S,S,v).call(S,e),s=(0,n.Z)(S,S,g).call(S,e),o=(0,n.Z)(S,S,w).call(S,e),l=(0,n.Z)(S,S,E).call(S,e),i=!r||!t||!a||!s||!o||l,u=(0,n.Z)(S,S,T).call(S,i,r,t,a,s,o,l);return{error:i,helperText:u,color:i?"error":"success"}}),(0,a.Z)(S,"passwordConfirmation",(e,r)=>{if(e.error)return{error:!0,helperText:"Check : invalid password",color:"error"};let t=e.value!==r;return{error:t,helperText:t?"Check : password missmatch":"Valid",color:t?"error":"success"}});var h={writable:!0,value:e=>{let r=e.length>=8&&e.length<=30;return r}},f={writable:!0,value:e=>{let r=!!e.match(RegExp(String.raw(o())));return r}},v={writable:!0,value:e=>{let r=!!e.match(RegExp(String.raw(l())));return r}},g={writable:!0,value:e=>{let r=!!e.match(RegExp(String.raw(i())));return r}},w={writable:!0,value:e=>{let r=!!e.match(RegExp(String.raw(u())));return r}},E={writable:!0,value:e=>{let r=e.replace(RegExp(String.raw(c()),"g"),"");return""!==r&&[...r].join(" ")}},x={writable:!0,value:e=>{let r=!!e.match(RegExp(String.raw(d())));return r}},R={writable:!0,value:e=>{let r=!!e.match(RegExp(String.raw(p())));return r}},b={writable:!0,value:e=>{let r=!!e.match(RegExp(String.raw(m())));return r}},Z={writable:!0,value:(e,r,t,n)=>{switch(e){case!0:let a=[!r&&"missing email prefix",!t&&"missing @",!n&&"missing email domain"].filter(e=>!1!==e).join(", ");return"Check : ".concat(a);case!1:return"Valid email"}}},T={writable:!0,value:(e,r,t,n,a,s,o)=>{switch(e){case!0:let l=[!r&&"should consist of 8 to 30 characters",!t&&"missing an uppercase letter",!n&&"missing a lowercase letter",!a&&"missing an alphanumeric character",!s&&"missing a special character",!!o&&"contains prohibited character(s) : ".concat(o)].filter(e=>!1!==e).join(", ");return"Check : ".concat(l);case!1:return"Valid password"}}}},5836:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return _}});var n=t(5893),a=t(7294),s=t(1163),o=t(8578),l=t(1047),i=t(7797),u=t(8065),c=t(5697),d=t.n(c),p=t(7357),m=t(8456),S=t(5861),h=t(3025),f=t(5323),v=t(3321),g=t(3787),w=t(3367);let E={helperText:"",error:!1,color:"",value:""},x={PASSWORD:"password",CONFIRM_PASSWORD:"confirmpassword"};function R(e){let{loading:r,locked:t,handleFormSubmit:s}=e,[o,l]=(0,a.useState)(E),[i,u]=(0,a.useState)(E),[c]=(0,w.e)("activeTheme"),d=e=>{let{id:r}=e.target;r===x.PASSWORD&&l({...f.Q.password(e.target.value),value:e.target.value}),r===x.CONFIRM_PASSWORD&&u({...f.Q.passwordConfirmation(o,e.target.value),value:e.target.value})};return(0,n.jsx)(p.Z,{sx:{margin:"auto",marginBottom:"24px",width:{sm:"400px"},"& .MuiTextField-root, button":{marginTop:"24px",width:"100%"}},children:(0,n.jsxs)("form",{id:"resetpassword",onSubmit:s,children:[(0,n.jsx)(g.Z,{id:x.PASSWORD,type:"password",size:"small",label:"Enter your new password",placeholder:"Enter your new password",helperText:o.helperText,error:o.error,disabled:r||t,color:"success"===o.color?o.color:"light"===c?"dark":"primary",onChange:d}),(0,n.jsx)(g.Z,{id:x.CONFIRM_PASSWORD,type:"password",size:"small",label:"Confirm your new password",placeholder:"Confirm your new password",helperText:i.helperText,error:i.error,disabled:r||t,color:"success"===i.color?i.color:"light"===c?"dark":"primary",onChange:d}),(0,n.jsx)(v.Z,{variant:"contained",type:"submit",disabled:r||t||o.error||i.error,children:"Submit"})]})})}function b(e){let{state:r,handleFormSubmit:t}=e;return(0,n.jsx)(h.Z,{children:(0,n.jsx)(p.Z,{sx:{padding:"16px"},children:(0,n.jsxs)(p.Z,{sx:{width:{md:"800px"},backgroundColor:"rgba(255, 255, 255, 0.2)",margin:"auto",marginTop:"32px",borderRadius:"8px",boxShadow:"inset 0 0 0.5px 1px hsla(0, 0%, 100%, 0.1), 0 0 0 1px hsla(230, 13%, 9%, 0.075), 0 0.3px 0.4px hsla(230, 13%, 9%, 0.02), 0 0.9px 1.5px hsla(230, 13%, 9%, 0.045), 0 3.5px 6px hsla(230, 13%, 9%, 0.09)",textAlign:"center",padding:"24px"},children:[(0,n.jsx)("div",{children:r.message&&(0,n.jsx)("p",{children:r.message})}),r.mode===i._p.RESET_PASSWORD&&(0,n.jsx)(R,{loading:r.loading,locked:r.locked,handleFormSubmit:t}),(0,n.jsx)("div",{children:r.loading?(0,n.jsx)(m.Z,{size:24,color:"secondary"}):""!==r.error?(0,n.jsxs)(S.Z,{variant:"caption",color:"error",children:["Error: ",r.error]}):(0,n.jsx)(S.Z,{variant:"body1",color:"success.main",children:r.success})})]})})})}R.propTypes={loading:d().bool,locked:d().bool,handleFormSubmit:d().func},b.propTypes={state:d().object,handleFormSubmit:d().func};var Z=JSON.parse('[{"mode":"verifyEmail","message":"Please wait while we verify your email.","success":"Success! Email verified."},{"mode":"resetPassword","message":"Reset your password.","success":"Success! Password changed."},{"mode":"recoverEmail","message":"","success":""}]');let T={loading:!0,locked:!1,checkCode:!1,message:"",error:"",success:"",mode:"",actionCode:"",password:""};var _=function(){var e;let[r,t]=(0,a.useState)(T),[c,d]=(0,a.useState)(null),{status:p,error:m,loading:S}=(0,u.f)(c),h=(0,s.useRouter)();(0,a.useEffect)(()=>{if(h.isReady){let{mode:r,actionCode:n}=h.query;if(!Object.values(i._p).includes(r)){t(e=>({...e,loading:!1,error:"Invalid mode"}));return}if(r&&n){var e;switch(t(t=>{var a;return{...t,message:null!==(e=null===(a=Z.find(e=>e.mode===r))||void 0===a?void 0:a.message)&&void 0!==e?e:"",mode:r,actionCode:n}}),r){case i._p.VERIFY_EMAIL:d((0,i.xe)(n));break;case i._p.RESET_PASSWORD:t(e=>({...e,checkCode:!0})),d((0,o.TX)(l.I8,n));break;default:t(e=>({...e,loading:!1,error:"Invalid request"}))}}else t(e=>({...e,loading:!1,error:"Invalid request"}))}},[h.isReady,h.query]);let f=e=>{var n,a,s;e.preventDefault(),t(e=>({...e,checkCode:!1})),d((0,i.jn)(r.actionCode,null!==(s=null==e?void 0:null===(n=e.target)||void 0===n?void 0:null===(a=n.password)||void 0===a?void 0:a.value)&&void 0!==s?s:""))};return(0,n.jsx)(b,{state:{...r,loading:S,error:r.error||m,locked:p===u.e.ERROR&&r.mode===i._p.RESET_PASSWORD,success:p!==u.e.SUCCESS||r.checkCode?"":null===(e=Z.find(e=>e.mode===r.mode))||void 0===e?void 0:e.success},handleFormSubmit:f})}}},function(e){e.O(0,[146,30,231,25,774,888,179],function(){return e(e.s=4865)}),_N_E=e.O()}]);