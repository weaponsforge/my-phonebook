(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{7572:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return t(6531)}])},2012:function(e,r,t){"use strict";t.d(r,{Z:function(){return c}});var a=t(5893),n=t(7294),i=t(9397),s=t(9820),o=t(4799),l=t(594);function c(e){let{message:r,closeHandler:t}=e,[c,u]=(0,n.useState)(!0),d=(e,r)=>{"clickaway"!==r&&(u(!1),t&&t())},p=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{color:"secondary",size:"small",onClick:d,children:"UNDO"}),(0,a.jsx)(o.Z,{size:"small","aria-label":"close",color:"inherit",onClick:d,children:(0,a.jsx)(l.Z,{fontSize:"small"})})]});return(0,a.jsx)("div",{children:(0,a.jsx)(s.Z,{open:c,autoHideDuration:6e3,onClose:d,message:r,action:p,sx:{maxWidth:600}})})}},6341:function(e,r,t){"use strict";var a=t(5893),n=t(5697),i=t.n(n),s=t(9397),o=t(6489),l=t(3367);function c(e){let{label:r="",variant:t="contained",isloading:n=!1,disabled:i=!1,sx:c={},handleClick:u}=e,d=(0,l.e6)("activeTheme");return(0,a.jsx)(s.Z,{sx:c,variant:t,disabled:n||i,onClick:u,children:(0,a.jsx)("div",{style:{display:"flex",alignItems:"center"},children:n?(0,a.jsx)(o.Z,{size:24,color:"light"===d?"dark":"primary"}):(0,a.jsx)("span",{children:r})})})}c.propTypes={label:i().string,variant:i().string,isloading:i().bool,disabled:i().bool,handleClick:i().func,sx:i().object},r.Z=c},3787:function(e,r,t){"use strict";var a=t(5893),n=t(2715),i=t(948);let s=(0,i.ZP)(e=>(0,a.jsx)(n.Z,{...e}))(e=>{let{theme:r}=e;return{"& .MuiInputBase-root":{"& input":{backgroundClip:"text !important"}},"& .MuiOutlinedInput-input":{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px transparent inset"}}}});r.Z=s},7797:function(e,r,t){"use strict";t.d(r,{LS:function(){return l},_p:function(){return i},jn:function(){return u},w$:function(){return o},xe:function(){return c}});var a=t(6154);let n="".concat("https://myphonebook-app.vercel.app","/api/account/action"),i={SEND_VERIFICATTION:"send_verification",SEND_RESET:"send_reset",VERIFY_EMAIL:"verifyEmail",RESET_PASSWORD:"resetPassword",RECOVER_EMAIL:"recoverEmail",RESEND_EMAIL_VERIFICATION:"resend_email_verification"},s=async e=>{let{mode:r,actionCode:t,email:i,password:s}=e;return await a.Z.post(n,{mode:r,actionCode:t,email:i,password:s})},o=async e=>s({mode:i.SEND_VERIFICATTION,email:e}),l=async e=>s({mode:i.SEND_RESET,email:e}),c=async e=>s({mode:i.VERIFY_EMAIL,actionCode:e}),u=async(e,r)=>s({mode:i.RESET_PASSWORD,actionCode:e,password:r})},891:function(e,r,t){"use strict";t.d(r,{n:function(){return a}});let a=async()=>{try{let e=await fetch("https://v2.jokeapi.dev/joke/Misc?format=json&safe-mode&type=single"),r=await e.json();return r}catch(e){}}},866:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var a=t(4924),n=t(9825);class i{}(0,a.Z)(i,"config",{createUserWithEmailAndPassword:n.Xb,signInWithEmailAndPassword:n.e5}),(0,a.Z)(i,"signUp",async(e,r)=>{try{let t=await i.config.createUserWithEmailAndPassword(n.I8,e,r),a=t.user;return a}catch(t){let e=t.code,r=t.message;return{errorCode:e,errorMessage:r}}}),(0,a.Z)(i,"signIn",async(e,r)=>{try{let t=await i.config.signInWithEmailAndPassword(n.I8,e,r),a=t.user;return a}catch(t){let e=t.code,r=t.message;return{errorCode:e,errorMessage:r}}})},771:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});var a=t(4924);class n{static wrap(e){return new Promise(r=>{e.then(e=>{r({response:e,status:n.STATUS.SUCCESS,error:""})},e=>{var t,a;r({response:null,status:n.STATUS.ERROR,error:null!==(a=null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.data)&&void 0!==a?a:e.message})})})}}(0,a.Z)(n,"STATUS",{IDLE:"idle",PENDING:"pending",SUCCESS:"success",ERROR:"error",DEFAULT:"default"})},5323:function(e,r,t){"use strict";t.d(r,{Q:function(){return m}});var a=t(2037),n=t(4924),i=t(7297);function s(){let e=(0,i.Z)(["(?<uppercase>[A-Z])"]);return s=function(){return e},e}function o(){let e=(0,i.Z)(["(?<lowercase>[a-z])"]);return o=function(){return e},e}function l(){let e=(0,i.Z)(["(?<number>[0-9])"]);return l=function(){return e},e}function c(){let e=(0,i.Z)(["(?<symbol>[-#?!@$ %^&*())])"]);return c=function(){return e},e}function u(){let e=(0,i.Z)(["(?<prohibitedCharacters>[-a-zA-Z0-9#?!@$ %^&*()]+)"]);return u=function(){return e},e}function d(){let e=(0,i.Z)(["(?<emailPrefix>^[^@]+)"]);return d=function(){return e},e}function p(){let e=(0,i.Z)(["(?<atSymbol>@)"]);return p=function(){return e},e}function g(){let e=(0,i.Z)(["(?<domain>[^@]+$)"]);return g=function(){return e},e}class m{}(0,n.Z)(m,"email",e=>{let r=(0,a.Z)(m,m,E).call(m,e),t=(0,a.Z)(m,m,S).call(m,e),n=(0,a.Z)(m,m,b).call(m,e),i=!r||!t||!n,s=(0,a.Z)(m,m,T).call(m,i,r,t,n);return{error:i,helperText:s,color:i?"error":"success"}}),(0,n.Z)(m,"password",e=>{let r=(0,a.Z)(m,m,f).call(m,e),t=(0,a.Z)(m,m,x).call(m,e),n=(0,a.Z)(m,m,h).call(m,e),i=(0,a.Z)(m,m,w).call(m,e),s=(0,a.Z)(m,m,v).call(m,e),o=(0,a.Z)(m,m,Z).call(m,e),l=!r||!t||!n||!i||!s||o,c=(0,a.Z)(m,m,j).call(m,l,r,t,n,i,s,o);return{error:l,helperText:c,color:l?"error":"success"}}),(0,n.Z)(m,"passwordConfirmation",(e,r)=>{if(e.error)return{error:!0,helperText:"Check : invalid password",color:"error"};let t=e.value!==r;return{error:t,helperText:t?"Check : password missmatch":"Valid",color:t?"error":"success"}});var f={writable:!0,value:e=>{let r=e.length>=8&&e.length<=30;return r}},x={writable:!0,value:e=>{let r=!!e.match(RegExp(String.raw(s())));return r}},h={writable:!0,value:e=>{let r=!!e.match(RegExp(String.raw(o())));return r}},w={writable:!0,value:e=>{let r=!!e.match(RegExp(String.raw(l())));return r}},v={writable:!0,value:e=>{let r=!!e.match(RegExp(String.raw(c())));return r}},Z={writable:!0,value:e=>{let r=e.replace(RegExp(String.raw(u()),"g"),"");return""!==r&&[...r].join(" ")}},E={writable:!0,value:e=>{let r=!!e.match(RegExp(String.raw(d())));return r}},S={writable:!0,value:e=>{let r=!!e.match(RegExp(String.raw(p())));return r}},b={writable:!0,value:e=>{let r=!!e.match(RegExp(String.raw(g())));return r}},T={writable:!0,value:(e,r,t,a)=>{switch(e){case!0:let n=[!r&&"missing email prefix",!t&&"missing @",!a&&"missing email domain"].filter(e=>!1!==e).join(", ");return"Check : ".concat(n);case!1:return"Valid email"}}},j={writable:!0,value:(e,r,t,a,n,i,s)=>{switch(e){case!0:let o=[!r&&"should consist of 8 to 30 characters",!t&&"missing an uppercase letter",!a&&"missing a lowercase letter",!n&&"missing an alphanumeric character",!i&&"missing a special character",!!s&&"contains prohibited character(s) : ".concat(s)].filter(e=>!1!==e).join(", ");return"Check : ".concat(o);case!1:return"Valid password"}}}},6531:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return C}});var a=t(4924),n=t(5893),i=t(5077),s=t(1987),o=t(9397),l=t(3972),c=t(6400),u=t(2012),d=t(6341),p=t(3787),g=t(5697),m=t.n(g),f=t(1664),x=t.n(f),h=t(2443);let w=e=>{let{state:r,eventsHandler:t}=e,a=(0,h.u)(),{joke:g,username:m,password:f,passwordConfirmation:w,errorMessage:v,successMessage:Z,loading:E,initialized:S}=r,{usernameHandler:b,passwordHandler:T,passwordConfirmationHandler:j,registerHandler:y,resetError:C}=t;return(0,n.jsx)(i.Z,{children:(0,n.jsxs)(s.Z,{sx:{display:"flex",flexWrap:"wrap",gap:"10px",alignItems:"center",justifyContent:"center",flex:1,background:"inherit",flexWrap:"wrap-reverse"},children:[(0,n.jsxs)(l.Z,{variant:"h8",component:"h3",gutterBottom:!0,sx:{color:e=>e.palette.text.disabled,textAlign:"center",paddingLeft:"20px",paddingRight:"20px",width:"50vw"},children:["`",g&&g.joke,"`"]}),(0,n.jsxs)(s.Z,{elevation:0,sx:{display:"grid",gridTemplateColumns:"1fr 20px",gridTemplateAreas:'"username icon1"\n            "password icon2"\n            "passwordConfirmation icon3"\n            "register ."\n            "login ."',alignItems:"stretch",gap:"10px",minWidth:"300px",width:"500px",borderRadius:"30px",padding:"40px",background:"inherit"},children:[(0,n.jsx)(p.Z,{sx:{gridArea:"username"},label:"Username (email)",id:"username",size:"small",type:"text",fullwidth:"true",required:!0,disabled:E,color:m.color,helperText:m.helperText,value:m.value,error:m.error,onInput:b}),!m.error&&(0,n.jsx)(c.Z,{fontSize:"large",color:"success",sx:{gridArea:"icon1"}}),(0,n.jsx)(p.Z,{sx:{gridArea:"password"},label:"Password",id:"userPassword",size:"small",type:"password",fullwidth:"true",required:!0,disabled:E,value:f.value,error:f.error,color:f.color,helperText:f.helperText,onInput:T}),!f.error&&(0,n.jsx)(c.Z,{fontSize:"large",color:"success",sx:{gridArea:"icon2"}}),(0,n.jsx)(p.Z,{sx:{gridArea:"passwordConfirmation"},label:"Password confirmation",id:"userPasswordConfirmation",size:"small",type:"password",fullwidth:"true",required:!0,disabled:E,value:w.value,error:w.error,color:w.color,helperText:w.helperText,onInput:j}),!w.error&&(0,n.jsx)(c.Z,{fontSize:"large",color:"success",sx:{gridArea:"icon3"}}),r.username.error||r.password.error||r.passwordConfirmation.error?(0,n.jsx)(o.Z,{disabled:!0,variant:"contained",sx:{gridArea:"register",fontWeight:"bold",color:e=>e.palette.primary.contrastText},onClick:y,children:"REGISTER"}):(0,n.jsx)(d.Z,{variant:"contained",sx:{gridArea:"register",fontWeight:"bold",color:e=>e.palette.primary.contrastText},isloading:E,handleClick:y,label:"REGISTER"}),(0,n.jsx)(x(),{href:"/login",style:{gridArea:"login"},children:(0,n.jsx)(l.Z,{sx:{fontSize:"12px",textAlign:"center",marginTop:"-5px",color:a.palette.text.primary},children:"Already have an account? Login instead."})}),!E&&S&&(0,n.jsxs)(l.Z,{sx:{fontSize:"12px",textAlign:"center",marginTop:"16px",color:a.palette.text.primary,a:{color:a.palette.text.primary}},style:{gridArea:"login"},children:["Did not receive the account verification email? Resend it \xa0",(0,n.jsx)(x(),{href:"/account?mode=resend_email_verification",children:"here"}),"."]}),(v||Z)&&(0,n.jsx)(u.Z,{message:v||Z,closeHandler:C})]})]})})};w.propTypes={state:m().object,eventsHandler:m().func};var v=t(891),Z=t(7294),E=t(5323),S=t(866),b=t(7797),T=t(771);let j={joke:void 0,username:{error:!0,helperText:" ",value:"",color:"text"},password:{error:!0,helperText:" ",value:"",color:"text"},passwordConfirmation:{error:!0,helperText:" ",value:"",color:"text"},errorMessage:void 0,successMessage:"",loading:!1,initialized:!1},y=()=>{let[e,r]=(0,Z.useState)(j),{username:t,password:i,passwordConfirmation:s}=e;(0,Z.useEffect)(()=>{(async()=>{let e=await (0,v.n)();r(r=>({...r,joke:e}))})()},[]);class o{}return(0,a.Z)(o,"usernameHandler",e=>{let{helperText:t,error:a,color:n}=E.Q.email(e.target.value);r(r=>({...r,username:{...r.username,value:e.target.value,error:a,helperText:t,color:n}}))}),(0,a.Z)(o,"passwordHandler",e=>{let{helperText:t,error:a,color:n}=E.Q.password(e.target.value);r(r=>({...r,password:{...r.password,value:e.target.value,error:a,helperText:t,color:n}}))}),(0,a.Z)(o,"passwordConfirmationHandler",e=>{let{helperText:t,error:a,color:n}=E.Q.passwordConfirmation(i,e.target.value);r(r=>({...r,passwordConfirmation:{...r.passwordConfirmation,value:e.target.value,error:a,helperText:t,color:n}}))}),(0,a.Z)(o,"registerHandler",()=>{let e=!t.error&&!i.error&&!s.error;e&&(async()=>{r(e=>({...e,loading:!0,errorMessage:void 0,successMessage:""}));let e=await S.Z.signUp(t.value,i.value),a=e.errorMessage,n=T.Z.STATUS.SUCCESS;if(void 0===a){let{error:e,status:r}=await T.Z.wrap((0,b.w$)(t.value));a=""===e?void 0:e,n=r}r(e=>({...e,loading:!1,initialized:!0,errorMessage:a,successMessage:n===T.Z.STATUS.SUCCESS?"Email sent. Please check your email. Check your Spam folder or wait for at most 5 minutes if you do not see the email right away.":""}))})()}),(0,a.Z)(o,"resetError",()=>{r({...e,errorMessage:"",successMessage:""})}),(0,n.jsx)(w,{state:e,eventsHandler:o})};var C=y}},function(e){e.O(0,[642,101,548,154,235,77,774,888,179],function(){return e(e.s=7572)}),_N_E=e.O()}]);