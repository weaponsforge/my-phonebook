(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[192],{8719:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/contacts",function(){return a(49)}])},8534:function(e,t,a){"use strict";a.d(t,{Z:function(){return x}});var r=a(5893),i=a(7294),n=a(1163),l=a(3232),s=a(7357),c=a(3972),d=a(6489),o=a(8600),u=function(e){let{children:t}=e;return(0,r.jsx)(s.Z,{sx:{width:{sm:"600px"},backgroundColor:{xs:"none",sm:"rgba(255, 255, 255, 0.4)"},borderRadius:"8px",textAlign:"center",margin:"24px !important",padding:"24px",display:"grid",placeContent:"center"},children:t})},h=a(3367),p=function(e){let{authError:t}=e,a=(0,h.e6)("activeTheme");return(0,r.jsx)(o.Z,{children:(0,r.jsx)(s.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",placeContent:"center",height:"100vh"},children:(0,r.jsxs)(u,{children:[(0,r.jsx)("span",{children:(0,r.jsx)(c.Z,{variant:"h6",color:"#000",children:"Loading..."})}),(0,r.jsx)("span",{children:(0,r.jsx)(d.Z,{color:"light"===a?"dark":"primary"})}),t&&(0,r.jsx)(c.Z,{variant:"label",color:"error",children:t})]})})})},x=function(e){return function(t){let a=(0,n.useRouter)(),{authLoading:s,authUser:c,authError:d}=(0,l.C0)("auth");return(0,i.useEffect)(()=>{s||null!==c||a.push("/login")},[c,s,a]),s?(0,r.jsx)(p,{}):c?(0,r.jsx)(e,{...t}):(0,r.jsx)(p,{authError:d})}}},9361:function(e,t,a){"use strict";a.d(t,{l:function(){return n}});var r=a(5893),i=a(8441);let n=()=>(0,r.jsx)(i.Z,{sx:{position:"fixed",width:"100vw"}})},7488:function(e,t,a){"use strict";a.d(t,{q:function(){return d}});var r=a(2037),i=a(4924),n=a(7297),l=a(3247),s=a(9751);function c(){let e=(0,n.Z)(["(?<segment>[^/]+)"]);return c=function(){return e},e}class d{static async createDoc(e,t){switch(!0){case(0,r.Z)(this,d,h).call(d,e):{let a=(0,l.JU)(this.db,e),r=a.id,i=await (0,l.pl)(a,{...t,doc_id:r,date_created:(0,l.Bt)(),date_updated:(0,l.Bt)()});return i}case(0,r.Z)(this,d,u).call(d,e):{let a=(0,l.hJ)(this.db,e),r=(0,l.JU)(a),i=r.id,n=await (0,l.pl)(r,{...t,doc_id:i,date_created:(0,l.Bt)(),date_updated:(0,l.Bt)()});return n}}}static async readDoc(e){if(!(0,r.Z)(this,d,h).call(d,e))return;let t=(0,l.JU)(this.db,e),a=await (0,l.QT)(t),i=a.data();return i}static async readCol(e){for(var t=arguments.length,a=Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];if(!(0,r.Z)(this,d,u).call(d,e))return;let n=(0,l.hJ)(this.db,e),s=(0,l.IO)(n,...a),c=await (0,l.PL)(s),o=c.docs.map(e=>({...e.data()}));return o}static async readColGroup(e){for(var t=arguments.length,a=Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];if(1!==(0,r.Z)(this,d,o).call(d,e))return;let n=(0,l.B$)(this.db,e),s=(0,l.IO)(n,...a),c=await (0,l.PL)(s),u=c.docs.map(e=>({...e.data()}));return u}static async updateDoc(e,t){if(!(0,r.Z)(this,d,h).call(d,e))return;let a=(0,l.JU)(this.db,e),i=await (0,l.r7)(a,{...t,date_updated:(0,l.Bt)()});return i}static async deleteDoc(e){if(!(0,r.Z)(this,d,h).call(d,e))return;let t=(0,l.JU)(this.db,e),a=await (0,l.oe)(t);return a}static async subscribeDoc(e,t){if(!(0,r.Z)(this,d,h).call(d,e))return;let a=(0,l.JU)(this.db,e),i=(0,l.cf)(a,t);return i}static async subscribeCol(e,t){for(var a=arguments.length,i=Array(a>2?a-2:0),n=2;n<a;n++)i[n-2]=arguments[n];if(!(0,r.Z)(this,d,u).call(d,e))return;let s=(0,l.hJ)(this.db,e),c=(0,l.IO)(s,...i),o=(0,l.cf)(c,t);return o}}(0,i.Z)(d,"db",(0,l.ad)(s.H));var o={writable:!0,value:e=>{let t=e.match(RegExp(String.raw(c()),"gi")).length;return t}},u={writable:!0,value:e=>{let t=(0,r.Z)(d,d,o).call(d,e);return 0!==t&&t%2==1}},h={writable:!0,value:e=>{let t=(0,r.Z)(d,d,o).call(d,e);return 0!==t&&t%2==0}};(0,i.Z)(d,"subscribeColGroup",async function(e,t){for(var a=arguments.length,i=Array(a>2?a-2:0),n=2;n<a;n++)i[n-2]=arguments[n];if(1!==(0,r.Z)(d,d,o).call(d,e))return;let s=(0,l.B$)(d.db,e),c=(0,l.IO)(s,...i),u=(0,l.cf)(c,t);return u})},49:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return J}});var r=a(5893),i=a(8534),n=a(8600),l=a(9361),s=a(7357),c=a(3232),d=a(7297),o=a(3972),u=a(2734),h=a(1987),p=a(7952);function x(){let e=(0,d.Z)(["(?<firstNameInitial>^[a-z])"]);return x=function(){return e},e}function m(){let e=(0,d.Z)(["(?<middleNameInitial>^[a-z])"]);return m=function(){return e},e}function f(){let e=(0,d.Z)(["(?<lastNameInitial>^[a-z])"]);return f=function(){return e},e}let g=(e,t,a)=>{var r,i,n;let l=(null!==(r=e.match(RegExp(String.raw(x()),"i")))&&void 0!==r?r:[""])[0],s=(null!==(i=t.match(RegExp(String.raw(m()),"i")))&&void 0!==i?i:[""])[0],c=(null!==(n=a.match(RegExp(String.raw(f()),"i")))&&void 0!==n?n:[""])[0];return"".concat(l).concat(s).concat(c)},v=e=>{let t=0;for(let a=0;a<e.length;a++)t+=e.charCodeAt(a);return t%255},j=e=>{let{contact:t}=e,a=(0,u.Z)(),i=g(t.first_name,t.middle_name,t.last_name).toUpperCase(),n=v(i),l=e=>{e.stopPropagation(),(0,c.lC)("ui.phase"),(0,c.cA)("ui.phase.editContact",!0),(0,c.cA)("ui.activeContact",t)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(h.Z,{elevation:5,sx:{backgroundColor:"inherit",backdropFilter:"blur(2px)",display:{xs:"none",md:"grid"},gridTemplateColumns:"1fr 6fr",gridAutoRows:"1fr",padding:"15px",gap:"15px",alignItems:"center",borderRadius:"10px",width:"auto",maxWidth:"80vw","&:hover":{backdropFilter:"contrast(120%)"}},onClick:l,children:[(0,r.jsx)(p.Z,{sx:{backgroundColor:"hsla(".concat(n,",50%,80%,50%)"),border:"1px solid grey"},children:i}),(0,r.jsxs)(o.Z,{variant:"h8",sx:{color:a.palette.primary,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[t.first_name," ",t.middle_name," ",t.last_name]})]}),(0,r.jsxs)(h.Z,{elevation:0,sx:{backgroundColor:"inherit",backdropFilter:"blur(2px)",display:{xs:"grid",md:"none"},gridTemplateColumns:"1fr 6fr",gridAutoRows:"1fr",padding:"15px",gap:"15px",alignItems:"center",borderRadius:"10px",width:"auto",maxWidth:"80vw","&:hover":{backdropFilter:"contrast(120%)"}},onClick:l,children:[(0,r.jsx)(p.Z,{sx:{backgroundColor:"hsla(".concat(n,",50%,80%,50%)"),border:"1px solid grey"},children:i}),(0,r.jsxs)(o.Z,{variant:"h8",sx:{color:a.palette.primary,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[t.first_name," ",t.middle_name," ",t.last_name]})]})]})},C=e=>{let{content:t}=e,{group:a,contacts:i}=t;return(0,r.jsxs)(s.Z,{sx:{display:"grid",gridTemplateColumns:"40px 1fr",p:"25px",borderBottom:"1px dashed grey"},children:[(0,r.jsx)(o.Z,{variant:"h4",sx:{padding:"15px",paddingLeft:"0",aspectRatio:"1",position:"sticky",top:0},children:"misc"===a?"":a}),(0,r.jsx)(s.Z,{sx:{backgroundColor:"inherit",display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",alignItems:"start",gap:"10px",flex:"1"},children:i.map((e,t)=>(0,r.jsx)(j,{contact:e},t))})]})};function w(){let e=(0,d.Z)(["(?<firstLetterChar>^[a-z])|"]);return w=function(){return e},e}let Z=()=>{let{data:e,error:t}=(0,c.ay)("contacts"),a=[...null!=e?e:[]].reduce((e,t)=>{let a=t.first_name.match(RegExp(String.raw(w()),"i"))[0];return a?(e[a.toUpperCase()]||(e[a.toUpperCase()]=[]),e[a.toUpperCase()]=[...e[a.toUpperCase()],t]):(e.misc||(e.misc=[]),e.misc=[...e.misc,t]),e},{}),i=Object.entries(a);return(0,r.jsxs)(s.Z,{sx:{width:"100%",height:"100%"},children:[e&&i.map((e,t)=>(0,r.jsx)(C,{content:{group:e[0],contacts:e[1]}},t)),t&&(0,r.jsx)("div",{children:"Error"})]})};var _=a(7294);let b={first_name:"Matching First Name",middle_name:"Matching Middle Name",last_name:"Matching Last Name",contact_no:"Matching Contact Number",contact_email:"Matching Contact Email"},y=e=>{let{content:t}=e,{group:a,contacts:i}=t;if(b[a])return(0,r.jsxs)(s.Z,{sx:{display:"grid",gridTemplateColumns:"1fr",padding:"20px",borderBottom:"1px dashed grey"},children:[(0,r.jsx)(o.Z,{variant:"h5",sx:{},children:b[a]}),(0,r.jsx)(s.Z,{sx:{backgroundColor:"inherit",display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",alignItems:"start",gap:"10px",flex:"1"},children:i.map((e,t)=>(0,r.jsx)(j,{contact:e},t))})]})};function k(){let e=(0,d.Z)(["",""]);return k=function(){return e},e}let{Box:A}=a(4914),E=(e,t)=>{let a=[...t].reduce((t,a)=>{for(let[r,i]of Object.entries(a))RegExp(String.raw(k(),e),"i").test(i)&&(t[r]||(t[r]=[]),t[r]=[...t[r],a]);return t},{});return a},I=()=>{let e=(0,c.C0)("ui.search.searchKeyword"),t=(0,c.C0)("contacts.data"),a=E(e,t);delete a.doc_id,delete a.profile_picture_url,delete a.date_updated,delete a.date_created;let i=Object.entries(a);return(0,_.useEffect)(()=>{if(1===i.length)for(let[,e]of i)(0,c.cA)("ui.activeContact",e[0]),(0,c.cA)("ui.phase.editContact",!0)},[i]),(0,r.jsx)(A,{sx:{width:"100%",height:"100%"},children:(0,r.jsx)(A,{children:i.map((e,t)=>(0,r.jsx)(y,{content:{group:e[0],contacts:e[1]}},t))})})},S=()=>{let e=(0,c.C0)("ui.phase");return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.Z,{sx:{flex:6.8,minWidth:"500px",maxHeight:"100%",width:"100%",height:"100%",overflowY:"scroll",userSelect:"none","&::-webkit-scrollbar":{display:"none"}},children:(null==e?void 0:e.search)?(0,r.jsx)(I,{}):(0,r.jsx)(Z,{})})})};var N=a(7488),R=a(9397),U=a(2715),O=a(2761);let W=()=>{let e=(0,c.C0)("ui.search.searchKeyword"),t=e=>{e.stopPropagation(),(0,c.cA)("ui.search.searchKeyword",e.target.value),(0,c.cA)("ui.phase",e=>({...e,createContact:!1,editContact:!1})),""===e.target.value?(0,c.cA)("ui.phase",e=>({...e,createContact:!1,editContact:!1,search:!1})):(0,c.cA)("ui.phase.search",!0)};return(0,r.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,r.jsx)(O.Z,{fontSize:"large",sx:{aspectRatio:1}}),(0,r.jsx)(U.Z,{fullWidth:!0,size:"small",variant:"outlined",value:null!=e?e:"",onChange:t,id:"searchField"})]})},z=()=>{let e=(0,c.C0)("ui.activeContact"),{editContact:t,createContact:a}=(0,c.C0)("ui.phase"),[i,n]=(0,_.useState)(e),[l,d]=(0,_.useState)(!1),u=(0,c.C0)("auth");(0,_.useEffect)(()=>{n(e)},[e]);let h=t=>{let a=t.target.id,r=t.target.value,l={...i,[a]:r};n(l),JSON.stringify(l)===JSON.stringify(e)?d(!1):d(!0)},x=()=>{var r,l,s,c,o,h,p,x;let m=null!==(l=null==u?void 0:null===(r=u.authUser)||void 0===r?void 0:r.uid)&&void 0!==l?l:"";switch(!0){case t:{let t={first_name:null!==(s=null==i?void 0:i.first_name)&&void 0!==s?s:"",middle_name:null!==(c=null==i?void 0:i.middle_name)&&void 0!==c?c:"",last_name:null!==(o=null==i?void 0:i.last_name)&&void 0!==o?o:"",phone_number:null!==(h=null==i?void 0:i.phone_number)&&void 0!==h?h:"",email_address:null!==(p=null==i?void 0:i.email_address)&&void 0!==p?p:"",profile_picture_url:null!==(x=null==i?void 0:i.profile_picture_url)&&void 0!==x?x:""},a=e.doc_id;N.q.updateDoc("users/".concat(m,"/contacts/").concat(a),t),d(!1);break}case a:N.q.createDoc("users/".concat(m,"/contacts/"),i),n(e)}};return(0,r.jsx)(s.Z,{sx:{display:"grid",gap:"10px",width:"100%",height:"auto"},children:(0,r.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",gap:"10px",alignItems:"center",width:"100%"},children:[(0,r.jsxs)(o.Z,{variant:"h4",sx:{alignSelf:"start"},children:[t&&"Edit Contact",a&&"Create Contact"]}),(0,r.jsx)(p.Z,{sx:{width:"50vw",maxWidth:"200px",maxHeight:"200px",height:"50vw",justifySelf:"center",gridColumn:"1/-1",border:"5px dashed gray",margin:"10px",src:"".concat(null==i?void 0:i.profile_picture_url)}}),(0,r.jsxs)(s.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"10px",width:"100%"},children:[(0,r.jsx)(o.Z,{variant:"h8",children:"First Name :"}),(0,r.jsx)(U.Z,{id:"first_name",value:i.first_name,size:"small",sx:{width:"100%"},onChange:h})]}),(0,r.jsxs)(s.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"10px",width:"100%"},children:[(0,r.jsx)(o.Z,{variant:"h8",children:"Middle Name :"}),(0,r.jsx)(U.Z,{id:"middle_name",value:i.middle_name,size:"small",sx:{width:"100%"},onChange:h})]}),(0,r.jsxs)(s.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"10px",width:"100%"},children:[(0,r.jsx)(o.Z,{variant:"h8",children:"Last Name:"}),(0,r.jsx)(U.Z,{id:"last_name",value:i.last_name,size:"small",sx:{width:"100%"},onChange:h})]}),(0,r.jsxs)(s.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"10px",width:"100%"},children:[(0,r.jsx)(o.Z,{variant:"h8",children:"Phone Number:"}),(0,r.jsx)(U.Z,{id:"phone_number",value:i.phone_number,size:"small",sx:{width:"100%"},onChange:h})]}),(0,r.jsxs)(s.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"10px",width:"100%"},children:[(0,r.jsx)(o.Z,{variant:"h8",children:"Email Address:"}),(0,r.jsx)(U.Z,{id:"email_address",value:i.email_address,size:"small",sx:{width:"100%"},onChange:h})]}),(0,r.jsx)(R.Z,{variant:"contained",fullWidth:!0,disabled:!l,onClick:x,children:"Save"})]})})},D=()=>{let e=(0,c.C0)("ui.activeContact.doc_id"),t=(0,c.C0)("ui.phase"),a=()=>{(0,c.cA)("ui.phase.editContact",!1),(0,c.cA)("ui.phase.createContact",!0),(0,c.cA)("ui.activeContact",{doc_id:"",first_name:"",middle_name:"",last_name:"",phone_number:"",email_address:"",profile_picture_url:""})},i=()=>{N.q.deleteDoc("users/test/contacts/".concat(e)),(0,c.cA)("ui.activeContact",null),(0,c.cA)("ui.phase",null)};return(0,r.jsxs)(h.Z,{elevation:0,sx:{flex:3.14,display:"flex",flexDirection:"column",minWidth:"200px",zIndex:"50",backgroundColor:"inherit",padding:"20px",paddingBottom:"0",width:"100%",gap:"20px",overflowY:"scroll",userSelect:"none","&::-webkit-scrollbar":{display:"none"}},children:[(0,r.jsx)(W,{}),((null==t?void 0:t.editContact)||(null==t?void 0:t.createContact))&&(0,r.jsx)(z,{}),!(null==t?void 0:t.createContact)&&(0,r.jsx)(R.Z,{variant:"contained",onClick:a,children:(0,r.jsx)(o.Z,{children:"Create Contact"})}),(0,r.jsx)(R.Z,{variant:"contained",onClick:i,children:(0,r.jsx)(o.Z,{children:"Delete Contact"})})]})};var B=function(){let{loading:e}=(0,c.ay)("contacts");return(0,r.jsxs)(n.Z,{children:[e&&(0,r.jsx)(l.l,{}),(0,r.jsxs)(s.Z,{sx:{flex:1,display:"flex",flexWrap:"wrap",overflowY:"scroll",userSelect:"none","&::-webkit-scrollbar":{display:"none"}},children:[(0,r.jsx)(D,{}),(0,r.jsx)(S,{})]})]})},J=(0,i.Z)(function(){let e=(0,c.C0)("auth");(0,_.useEffect)(()=>{N.q.subscribeCol("users/".concat(e.authUser.uid,"/contacts"),e=>{let t=[];e.forEach(e=>{t.push(e.data())}),(0,c.Gt)("contacts",()=>t)})},[e.authUser.uid]);let t=()=>{};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(B,{eventsHandler:t})})})}},function(e){e.O(0,[373,130,368,418,600,774,888,179],function(){return e(e.s=8719)}),_N_E=e.O()}]);